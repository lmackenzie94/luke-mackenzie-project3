<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Guitar Tuner</title>
    <link href="https://fonts.googleapis.com/css?family=Amatic+SC:700" rel="stylesheet">
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <header>
        <div class="content wrapper">
            <h1>- Guitar Tuner -</h1>

            <form action="">
                <label for="tuning" class="visuallyHidden">Select tuning:</label>
                <select name="tuning" id="tuning">
                    <option value="noSelection" selected class="select-tuning">Please select a tuning:</option>
                    <option value="standard">Standard</option>
                    <option value="halfStepDown">Half-step-down</option>
                    <option value="fullStepDown">Full-step-down</option>
                </select>
            </form>

            <p class="message"></p>
            <div class="tuner"></div>
            <section>
                <div class="list-title">
                    <h2>Please select a tuning above</h2>
                </div>
                <div class="list-songs">
                    <ul></ul>
                </div>
            </section>
            
            

        </div>
    </header>

<script src='https://code.jquery.com/jquery-3.2.1.min.js' integrity='sha256-hwg4gsxgFZhOsEEamdOYGBf13FyQuiTwlAQgxVSNgt4='crossorigin='anonymous'></script>

<script>

    const tunerApp = {};

    const $tuner = $('.tuner');

     

    $(function() {

        const songList = {
            standard: ['Free Fallin\' - Tom Petty', 'Tears in Heaven - Eric Clapton', 'Gravity - John Mayer'],
            fullStepDown: ['Say Goodnight - Bullet For My Valentine', 'Adam\'s Song - Blink-182', 'Timshel - Mumford & Sons'],
            halfStepDown: ['Swing Life Away - Rise Against', 'Sweet Child O\' Mine - Guns N\' Roses', 'Bold As Love - Jimi Hendrix']
        }

        // console.log(songList.standard);
        

        tunerApp.updateButton = $('select').change(function() {

            const selection = $('select').val();
            const currentSongList = songList[selection];
            const notes = {
                standard: ['E', 'A', 'D', 'G', 'B', 'E'],
                fullStepDown: ['D', 'G', 'C', 'F', 'A', 'D'],
                halfStepDown: ['D#', 'G#', 'C#', 'F#', 'A#', 'D#'],
                noSelection: []
            }
            // const $tuner = $('.tuner');
            const $popularSongs = $('.list-songs ul');

            // empty tuner & popular song list after every change in Selection
            $tuner.empty();
            $popularSongs.empty();

            // populate tuner with buttons based on the Selection
            let keyCount = 6;
            notes[selection].forEach((i) => {
                $tuner.append(`<div class="button" data-key="${keyCount}">${i}</div>`);
                keyCount--;
            })

            // change background colour of tuner based on the Selection

            $tuner.removeClass('full-step half-step standard');
            if (selection === "fullStepDown") {
                $tuner.addClass('full-step');
            } else if (selection === "halfStepDown") {
                $tuner.addClass('half-step');
            } else if (selection === "standard") {
                $tuner.addClass('standard');
            } 

            if (selection === "noSelection") {
                $('.list-title').html(`<h2>Please select a tuning above</h2>`);
                $('.message').text('');
            } else {
                $('.list-title').html(`<h2>Popular songs in <span>${selection}</span> tuning</h2>`);
                $('.message').text('click a button to hear the corresponding note:');
            }

            console.log(selection);

            currentSongList.forEach(i => {
                $popularSongs.append(`<li>${i}</li>`);
            });
        });

        const tuningSounds = {
            standard: [
                "assets/sounds/standard-1.wav",
                "assets/sounds/standard-2.wav",
                "assets/sounds/standard-3.wav",
                "assets/sounds/standard-4.wav",
                "assets/sounds/standard-5.wav",
                "assets/sounds/standard-6.wav",
            ],
            fullStepDown: [
                "assets/sounds/full-step-1.wav",
                "assets/sounds/full-step-2.wav",
                "assets/sounds/full-step-3.wav",
                "assets/sounds/full-step-4.wav",
                "assets/sounds/full-step-5.wav",
                "assets/sounds/full-step-6.wav",
            ],
            halfStepDown: [
                "assets/sounds/half-step-1.wav",
                "assets/sounds/half-step-2.wav",
                "assets/sounds/half-step-3.wav",
                "assets/sounds/half-step-4.wav",
                "assets/sounds/half-step-5.wav",
                "assets/sounds/half-step-6.wav",
            ]
        };
        
        $tuner.on('click', '.button', function(key) { // event bubbling
            // get the current note from the button pressed
            const currentButton = $(this).data('key');
            console.log(currentButton);

            // Using the note defined above, find the corresponding audio file from the standardTuning array
            const currentSelection = $('select').val();
            const audioFile = tuningSounds[currentSelection][currentButton - 1];
            console.log(currentSelection);

            // Now that we have the correct audio file, instantiate a new Audio object, passing in the audio file
            const sound = new Audio(audioFile);

            // sound object contains a play method that will play the sound
            sound.play();
  
        });
    
    });

// ASSIGN DOM ELEMENTS TO VARIABLES
 





</script>



</body>
</html>